### 函数中的作用域

函数作用域指的是属于该函数的变量可以在当前函数作用域以及内嵌的作用域中进行复用

### 隐藏内部实现

从写好的代码中挑选一个片段使用函数声明对其进行包装，可以实现对该段代码的隐藏  
**遵循最小授权或最小暴露原则**  
进行隐藏的好处：规避冲突（避免同名标识符之间的冲突，避免无关代码对其他标识符进行修改等操作）

* 规避冲突的方法
    * 全局命名空间
        * 在全局作用域中声明一个对象，将所有需要暴露给外界的变量都设置为该对象的属性。
    * 模块管理
        * 通过模块管理工具将所有标识符添加到一个特定的作用域中。

### 函数作用域

前文提到可以通过函数声明实现隐藏作用域，但是用显式函数声明，那函数名会对全局作用域造成污染。  
可以通过包装函数+立即执行来实现同样的功能，下面就是一个函数表达式，**函数表达式中的函数名是声明在自身作用域中，而不是全局作用域中。**

```
(function foo(){
    let a = 3;
    console.log(a)
})()
```

#### 匿名和具名

函数表达式最常用的场景可能就是回调函数  
回调函数中使用的一般都是匿名函数表达式，且只有函数表达式可以匿名，函数声明不可匿名。

* 匿名函数表达式缺点：
    * 匿名函数在栈追踪时没有函数名，增加调试难度
    * 函数自引用时只能通过 arguments.callee 使用
    * 降低代码可读性

#### 立即执行函数表达式IIFE

* 一种用法是使用匿名函数表达式 function(){...}()。
* 进阶用法使用括号包含整体函数 (function(){...})()
    * 二者功能相同，写法不同而已
* 倒置代码的运行顺序


### 块作用域

几种实现块作用域的方法
* with
    * with从对象中创建的作用域仅在with声明作用域中
* try/catch
    * catch会创建一个块作用域，内部语句仅在catch内有效
* let ES6新增的局部声明关键字
* const ES6新增的局部声明关键字 限于常量

块作用域的流行和JS的垃圾回收机制以及闭包有关