- [词法阶段](#%E8%AF%8D%E6%B3%95%E9%98%B6%E6%AE%B5)
  - [查找](#%E6%9F%A5%E6%89%BE)
- [欺骗词法](#%E6%AC%BA%E9%AA%97%E8%AF%8D%E6%B3%95)


第一章提到的作用域有两种工作模式：词法作用域（更通用）和动态作用域（bash脚本）

### 词法阶段

词法作用域是定义在词法阶段的作用域  
词法作用域由函数声明时所处的位置决定  

```
//例子解析
fucntion foo(a){
    let b = a*2;
    function bar(c){
        console.log(a,b,c)
    }
    bar(b*3)
}
foo(2)
```

* 第一层作用域 全局作用域
    * foo
* 第二层作用域 foo创建的作用域
    * a bar b
* 第三层作用域 bar创建的作用域     
    * c

#### 查找

作用域查找会在找到第一个匹配的标识符时停止

### 欺骗词法

欺骗词法相当于是修改词法作用域，下列的两种方法会降低性能，不推荐使用。

* eval
    * eval可以接受一个字符串作为参数，将其编译为可执行代码，并插入到当前的位置。相当于修改当前作用域
* with
    * with(obj){}   obj为一个对象，with会把{}内部的变量绑定到obj的作用域上，但是如果obj上找不到{}中的对应变量，则会将变量声明到全局环境中，污染作用域。